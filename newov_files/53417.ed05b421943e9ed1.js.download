"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53417],{53417:function(e,n,t){t.r(n),t.d(n,{ExperimentLEGO326:function(){return eo},SkeletonLoader:function(){return et},experimentConfig:function(){return en}});var o,r,i=t(52322),a=t(87992),c=t(70865),s=t(96670),l=t(47999),u=t(66358),d=t(60591),f=t(25282),p=t(200),v=function(e){var n=e.initialProps;return(0,i.jsx)(T,(0,c.Z)({},n))},k=t(47842),m=t(88849),w=t(2784),g={flagID:"cvrt-1261-free-trial-cta-copy-adp",id:"CVRT-1261",name:"Free trial CTA copy on ADP",treatments:(o={},(0,k.Z)(o,m.NM,function(e){var n=e.experiment,t=e.initialProps;return(0,w.useEffect)(function(){n.recordImpression()},[]),(0,i.jsx)(v,{initialProps:t})}),(0,k.Z)(o,m.vG,function(e){var n=e.experiment,t=e.initialProps;(0,w.useEffect)(function(){n.recordImpression()},[]);var o=t.isFreeTrial,r=t.label;return(0,i.jsx)(T,(0,s.Z)((0,c.Z)({},t),{label:o?"Download with Free Trial":r}))}),o)},L=function(){return(0,i.jsx)(p.r,{monitoringOrigin:"CVRT-1261 LoadingButtonFallback"})},h=function(e){return(0,i.jsx)(a.K,{config:g,initialProps:e,Portal:v,SkeletonLoader:L})},Z=t(40233),C=t(8740),x=t(14323),b=(0,C.ZL)()(function(e){return{downloadButtonCTA:{marginTop:e.tokens.spacing.m}}}),P=function(e){var n=e.selectedLicense,t=e.selectedPlan;return n&&t?"planSelected - ".concat(n.toLowerCase(),"License - ").concat(t):u.t1G},T=function(e){var n=e.label,t=e.onClick,o=e.classes,r=e.analyticsLabel;return(0,i.jsx)(l.z,{"aria-label":n,variant:"contained",color:"secondary",onClick:t,fullWidth:!0,className:o.downloadButtonCTA,labelTrack:r,children:n})},y=function(e){var n=e.handleDownloadClick,t=e.selectedLicense,o=void 0===t?d.ur:t,r=b().classes,a=(0,f.s)(),c=a.selectedPlan,s=a.isFreeTrial,l=(0,Z.d)(),u=s?x.KJ:x.vz,p=P({selectedLicense:o,selectedPlan:c});return(0,w.useEffect)(function(){l({actionName:"convert - LO image conversion panel download button is viewed"})},[]),(0,i.jsx)(h,{label:u,onClick:function(){n(),l({actionName:"convert - LO image conversion panel download button clicked"})},classes:r,analyticsLabel:p,isFreeTrial:s})},E=function(e){var n=e.initialProps,t=e.children;return(0,i.jsx)(y,(0,s.Z)((0,c.Z)({},n),{children:t}))},D=t(26297),O=t(21805),I=(0,C.ZL)()(function(e){return{downloadButtonCTA:{marginTop:e.tokens.spacing.m}}}),S=function(e){var n=e.selectedLicense,t=e.selectedPlan;return n&&t?"planSelected - ".concat(n.toLowerCase(),"License - ").concat(t):u.t1G},j=function(e){var n=e.handleDownloadClick,t=e.selectedLicense,o=void 0===t?d.ur:t,r=e.variant,a=I().classes,c=(0,f.s)(),s=c.selectedPlan,l=c.isFreeTrial,u=(0,Z.d)(),p=l?x.KJ:x.vz,v=S({selectedLicense:o,selectedPlan:s});return(0,w.useEffect)(function(){u({actionName:"convert - LO image conversion panel download button is viewed"})},[]),(0,i.jsx)(h,{label:p,onClick:function(){n(),u({actionName:"convert - LO image conversion panel download button clicked ".concat(null==r?void 0:r.key)})},classes:a,analyticsLabel:v,isFreeTrial:l})},G={cookieValue:"false",cookieExpiration:new Date(new Date().getTime()+864e5),shouldSetCookie:!0,shouldRemoveAuthRedirect:!1},N=(0,s.Z)((0,c.Z)({},G),{cookieValue:"true"}),A=(0,s.Z)((0,c.Z)({},G),{cookieValue:"true",shouldRemoveAuthRedirect:!0}),F=t(98788),R=t(87394),V=t(5163),B=t(5094),z=t(44699),_=t(65532),M=t(42405),K=t(66970),q=t(12969),J=t(12708),U=t(44297),W=t(38419),Q=t(38204),H=t(5632),X=(0,C.ZL)()(function(e){return{downloadButtonCTA:{marginTop:e.tokens.spacing.m}}}),Y=function(e){var n=e.selectedLicense,t=e.selectedPlan;return n&&t?"planSelected - ".concat(n.toLowerCase(),"License - ").concat(t):u.t1G},$=function(e){var n=e.couponCode,t=(0,H.useRouter)(),o=t.query.testGeo;return(0,w.useCallback)(function(e){var r,i=e.orderId,a=(0,W.DW)({language:t.locale,relativePath:(0,Q.U2)({queryParams:(0,c.Z)({orderId:i},o?{testGeo:o}:{},n?(r={},(0,k.Z)(r,d.d9,n),(0,k.Z)(r,d.Gp,n),r):{})})});t.push(a)},[n,t,o])},ee=function(e){var n,t=e.handleDownloadClick,o=e.selectedLicense,r=void 0===o?d.ur:o,a=e.asset,l=e.products,u=X().classes,p=(0,f.s)(),v=p.selectedPlan,k=p.isFreeTrial,m=(0,B.O)({asset:a,products:l,selectedPlan:v,isFreeTrial:k}).landingPage,g=k?x.KJ:x.vz,L=Y({selectedLicense:r,selectedPlan:v}),C=(0,Z.d)(),b=(0,M.D)().enqueueSnackbar,P=(0,_.PE)(),T=P.region,y=P.currencyData.currency,E=(0,R.Z)((null==m?void 0:m.split("?"))||[],2),D=(E[0],E[1]),O=Object.fromEntries(new URLSearchParams(D));O.assetId;var I=O.couponCode,S=O.license,j=O.productId,G=$({couponCode:I});(0,w.useEffect)(function(){C({actionName:"LEGO-326: logged out order is viewed variantB"})},[]);var N=(0,w.useCallback)(function(e){var n,t,o,r,i={component:"DownloadButtonLoggedOut.tsx",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"LEGO-326: DownloadButtonLoggedOut",errorTitle:e.title,msg:"LEGO-326: Anonymous order creation failed",referrerPath:null==window?void 0:null===(n=window.location)||void 0===n?void 0:n.pathname,referrerQuery:null==window?void 0:null===(t=window.location)||void 0===t?void 0:t.search};null===(o=window.NREUM)||void 0===o||null===(r=o.noticeError)||void 0===r||r.call(o,e,i)},[]),A=(n=(0,F.Z)(function(){var e,n,o,i,l;return(0,V.__generator)(this,function(u){switch(u.label){case 0:t(),C({actionName:"LEGO-326: Logged out checkout variantB",customAttributes:{selectedPlan:v,selectedLicense:r}}),u.label=1;case 1:return u.trys.push([1,3,,4]),e=(0,U.Tp)(a),n=(0,q.M)({asset:a}),o=a?{assets:[{asset:a,selectedAssetSize:(0,K.DW)({assetType:e,assetSize:n})}]}:{},[4,(0,J.LV)({configs:{headers:{"x-shutterstock-features":"checkoutV3"}},country:T,currency:y,paymentProfileId:void 0,orderItems:[(0,s.Z)((0,c.Z)({},o),{product:{id:j,eligibleForRebilling:!0},productType:d.Cs})],selectedShadowsOption:void 0,vatNumber:void 0,couponCode:I,license:S,debitableIdentifier:void 0})];case 2:return i=u.sent().data,G({orderId:"shutterstock.".concat(i.id)}),C({actionName:"LEGO-326: logged out order creation success",customAttributes:{productId:j,productType:d.Cs,country:T,currency:y,assetType:e,assetSize:n,license:S}}),[3,4];case 3:return N(l=u.sent()),b({alertSeverity:z.cM,error:l}),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,i.jsx)(h,{label:g,onClick:A,classes:u,analyticsLabel:L,isFreeTrial:k})},en={flagID:"lego-326-logged-out-checkout",id:"LEGO-326",name:"Logged out checkout experiment",treatments:(r={},(0,k.Z)(r,m.NM,function(e){var n=e.experiment,t=e.initialProps;(0,w.useEffect)(function(){n.recordImpression()},[]);var o=t.handleDownloadClick,r=(0,D.Z)(t,["handleDownloadClick"]),a=(0,s.Z)((0,c.Z)({},r,n),{handleDownloadClick:function(){O.Z.set("pwnext",G.cookieValue,{expires:G.cookieExpiration}),o()}});return(0,i.jsx)(j,(0,c.Z)({},a))}),(0,k.Z)(r,m.vG,function(e){var n=e.experiment,t=e.initialProps;(0,w.useEffect)(function(){n.recordImpression()},[]);var o=t.handleDownloadClick,r=(0,D.Z)(t,["handleDownloadClick"]),a=(0,s.Z)((0,c.Z)({},r,n),{handleDownloadClick:function(){O.Z.set("pwnext",N.cookieValue,{expires:N.cookieExpiration}),o()}});return(0,i.jsx)(j,(0,c.Z)({},a))}),(0,k.Z)(r,m._Z,function(e){var n=e.experiment,t=e.initialProps;(0,w.useEffect)(function(){n.recordImpression()},[]);var o=(0,s.Z)((0,c.Z)({},t),{handleDownloadClick:function(){O.Z.set("pwnext",A.cookieValue,{expires:A.cookieExpiration})}});return(0,i.jsx)(ee,(0,c.Z)({},o))}),r)},et=function(){return null},eo=function(e){return(0,i.jsx)(a.K,{config:en,initialProps:e,Portal:E,SkeletonLoader:et})}}}]);
//# sourceMappingURL=53417.ed05b421943e9ed1.js.map